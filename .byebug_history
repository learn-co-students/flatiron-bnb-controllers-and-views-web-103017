exit
self.all
self
start_date
exit
openings
exit
openings[0].reservations
openings[0].reservation
openings
exit
   openings
    end
      end
        end
          openings << listing
        if is_available
        end
          end
            is_available = false
          if [start_date.to_date, checkin].max < [end_date.to_date, checkout].min
          checkout = reservation.checkout
          checkin = reservation.checkin
          #binding.pry
        listing.reservations.each do |reservation|
        is_available = true
      if listing != []
    listings.each do |listing|
    openings = []
    # listings = Hash.new(0)
    # all_listings = Hash.new(0)
listings = self.all
first.reservations
first
first = self.all[0]
self.all
self
self.listing
self.listings
self.all
self
    end
      []
    else
        where.not(reservations: {check_out: start_date..end_date})
      joins(:reservations).
        where.not(reservations: {check_in: start_date..end_date}) &
      joins(:reservations).
if start_date && end_date
end_date
start_date
exit
city
city.city_openings(@start_date, @end_date).length
city.city_openings(@start_date, @end_date)
city.city_openings(@start_date, @end_date)[0].classe
city.city_openings(@start_date, @end_date)[0].available
city.city_openings(@start_date, @end_date)[0].availible
city.city_openings(@start_date, @end_date)[0]
city.city_openings(@start_date, @end_date).name
city.city_openings(@start_date, @end_date).title
city.city_openings(@start_date, @end_date).id
city.city_openings(@start_date, @end_date)
city.city_openings
city
city =@cities.first
@cities.first
@cities.each do |city|
@cities
    @end_date = params[:end_date].to_date
    @start_date = params[:start_date].to_date
@cities = City.all
params
@cities
exit
params
exit
params
exit
params
params[:start_date]
exit
